{
  "name": "copilot-script-runner",
  "displayName": "Copilot Script Runner",
  "description": "AI-powered tool for running multi-line PowerShell and Bash scripts with GitHub Copilot. Solves the multi-line command issue with run_in_terminal by writing scripts to temp files before execution.",
  "version": "3.0.0",
  "publisher": "bdayadev",
  "author": {
    "name": "Bdaya Dev",
    "url": "https://github.com/bdaya-dev"
  },
  "license": "MIT",
  "icon": "images/icon.png",
  "galleryBanner": {
    "color": "#1e1e1e",
    "theme": "dark"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/bdaya-dev/copilot-script-runner.git"
  },
  "bugs": {
    "url": "https://github.com/bdaya-dev/copilot-script-runner/issues"
  },
  "homepage": "https://github.com/bdaya-dev/copilot-script-runner#readme",
  "engines": {
    "vscode": "^1.100.0"
  },
  "categories": [
    "AI",
    "Other"
  ],
  "keywords": [
    "copilot",
    "ai",
    "terminal",
    "powershell",
    "bash",
    "script",
    "automation",
    "devops"
  ],
  "activationEvents": [],
  "main": "./out/extension.js",
  "contributes": {
    "languageModelTools": [
      {
        "name": "script-runner_run_script",
        "tags": [
          "terminal",
          "powershell",
          "bash",
          "wsl",
          "script",
          "script-runner"
        ],
        "toolReferenceName": "runScript",
        "displayName": "Run Script",
        "modelDescription": "Runs a script by writing it to a temp file and executing it. Supports multiple shells: PowerShell (default on Windows), Bash, WSL, Git Bash, Zsh, and Fish. This is ideal for multi-line commands that would fail with direct terminal execution. The script file is automatically cleaned up after execution. Returns stdout, stderr, exit code, and a command ID. Supports background mode for long-running processes (servers, watch tasks) - set isBackground=true to return immediately with a command ID. Use the command ID with getScriptOutput to retrieve output later.",
        "canBeReferencedInPrompt": true,
        "icon": "$(terminal)",
        "inputSchema": {
          "type": "object",
          "properties": {
            "script": {
              "type": "string",
              "description": "The script content to execute. Can be multi-line."
            },
            "shell": {
              "type": "string",
              "enum": [
                "powershell",
                "bash",
                "wsl",
                "gitbash",
                "zsh",
                "fish"
              ],
              "description": "Which shell to use. 'powershell' (default) for PowerShell, 'bash' for native Bash (Linux/macOS/Remote SSH), 'wsl' for Windows Subsystem for Linux, 'gitbash' for Git Bash on Windows, 'zsh' for Z shell, 'fish' for Fish shell.",
              "default": "powershell"
            },
            "workingDirectory": {
              "type": "string",
              "description": "The working directory to run the script in. Defaults to current directory."
            },
            "timeoutMs": {
              "type": "number",
              "description": "Timeout in milliseconds."
            },
            "keepScript": {
              "type": "boolean",
              "description": "If true, keeps the temp script file after execution for debugging.",
              "default": false
            },
            "isBackground": {
              "type": "boolean",
              "description": "If true, starts the script as a background process and returns immediately with a command ID. Use this for long-running processes like servers or watch tasks.",
              "default": false
            },
            "closeOnTimeout": {
              "type": "boolean",
              "description": "If true and the script times out, the running command will be interrupted (Ctrl+C / SIGINT) instead of just stopping output collection. The terminal is kept alive for reuse. Only meaningful when timeoutMs is set.",
              "default": false
            }
          },
          "required": [
            "script"
          ]
        }
      },
      {
        "name": "script-runner_get_version",
        "tags": [
          "version",
          "info",
          "script-runner"
        ],
        "toolReferenceName": "scriptRunnerVersion",
        "displayName": "Get Script Runner Version",
        "modelDescription": "Returns the currently loaded version of the Copilot Script Runner extension. Useful for debugging and verifying the correct version is installed.",
        "canBeReferencedInPrompt": true,
        "icon": "$(info)",
        "inputSchema": {
          "type": "object",
          "properties": {},
          "required": []
        }
      },
      {
        "name": "script-runner_get_output",
        "tags": [
          "terminal",
          "output",
          "script-runner"
        ],
        "toolReferenceName": "getScriptOutput",
        "displayName": "Get Script Output",
        "modelDescription": "Retrieves the output from a previously executed script by its command ID. Use this to check the output of background processes or previously executed scripts. The command ID is returned by the runScript tool.",
        "canBeReferencedInPrompt": true,
        "icon": "$(output)",
        "inputSchema": {
          "type": "object",
          "properties": {
            "commandId": {
              "type": "string",
              "description": "The command ID returned by runScript."
            },
            "waitForCompletion": {
              "type": "boolean",
              "description": "If true, waits for the command to finish before returning. If false (default), returns immediately with whatever output has been collected so far.",
              "default": false
            }
          },
          "required": [
            "commandId"
          ]
        }
      }
    ]
  },
  "scripts": {
    "generate-version": "node scripts/generate-version.js",
    "vscode:prepublish": "npm run compile",
    "compile": "npm run generate-version && tsc -p ./",
    "watch": "tsc -watch -p ./",
    "lint": "eslint src --ext ts",
    "package": "vsce package",
    "semantic-release": "semantic-release"
  },
  "devDependencies": {
    "@semantic-release/changelog": "^6.0.0",
    "@semantic-release/exec": "^6.0.0",
    "@semantic-release/git": "^10.0.0",
    "@types/node": "^22.0.0",
    "@types/vscode": "^1.100.0",
    "@typescript-eslint/eslint-plugin": "^8.0.0",
    "@typescript-eslint/parser": "^8.0.0",
    "conventional-changelog-conventionalcommits": "^9.1.0",
    "eslint": "^9.0.0",
    "ovsx": "^0.9.0",
    "semantic-release": "^24.0.0",
    "typescript": "^5.7.0"
  }
}
